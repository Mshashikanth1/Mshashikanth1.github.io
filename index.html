<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PokÃ©mon RPG Resume Battle</title>
    <style>
        body {
          margin:0;
          overflow:hidden;
          background: radial-gradient(circle at 50% 50%, #0d0d1a 0%, #000 100%);
          font-family: 'Press Start 2P', monospace;
        }
        #battlefield {
          position:relative;
          height:100vh;
          display:flex;
          align-items:center;
          white-space:nowrap;
          overflow-x:auto;
          scroll-behavior:smooth;
          padding:0 50px;
          transition: all 0.5s ease; /* Smooth transition for layout changes */
        }
        .pokemon {
          position:relative;
          display:inline-flex;
          flex-direction:column;
          align-items:center;
          cursor:pointer;
          margin:0 15px;
          transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* fun jump easing */
        }
        .pokemon img {
          width:125px;
          height:125px;
          object-fit:contain;
          image-rendering: pixelated;
          transition: transform 0.3s ease, width 0.5s ease, height 0.5s ease, opacity 0.2s ease-out; /* Smooth transition for size and opacity changes */
        }
        .dialog {
          position:absolute;
          bottom:100%;
          margin-bottom:25px; /* Increased margin to make space for the tail */
          background:white; /* Solid white background */
          color:black;
          padding:10px; /* Adjusted padding */
          border: 4px solid black; /* Dark, thick border */
          border-radius:4px; /* Slightly rounded corners */
          font-size:12px;
          white-space:normal;
          width:200px;
          text-align:center;
          opacity:0;
          pointer-events:none;
          transition: opacity 0.2s ease, width 0.5s ease, font-size 0.5s ease; /* Smooth transition for dialog changes */
          z-index:10;
          box-shadow: 8px 8px 0px rgba(0,0,0,0.5); /* Retro shadow effect */
        }
        .dialog::before {
          content: '';
          position: absolute;
          bottom: -12px; /* Position the tip of the arrow */
          left: 50%;
          transform: translateX(-50%);
          width: 0;
          height: 0;
          border-left: 12px solid transparent;
          border-right: 12px solid transparent;
          border-top: 12px solid black; /* Outer border of the arrow */
        }
        .dialog::after {
          content: '';
          position: absolute;
          bottom: -8px; /* Position the tip of the inner arrow */
          left: 50%;
          transform: translateX(-50%);
          width: 0;
          height: 0;
          border-left: 8px solid transparent;
          border-right: 8px solid transparent;
          border-top: 8px solid white; /* Inner fill of the arrow */
        }
        canvas {
          position:absolute;
          left:0;
          top:0;
          pointer-events:none;
          z-index:5;
        }

        @media (max-width: 768px) {
          #battlefield {
            padding: 0 20px; /* Adjust padding for smaller screens */
            align-items: center;
          }

          .pokemon {
            margin: 0 10px; /* Adjust margin for smaller screens */
          }

          .pokemon img {
            width: 90px; /* Slightly smaller */
            height: 90px;
          }

          .dialog {
            width: 180px; /* Slightly smaller */
            font-size: 11px;
          }
        }

        @media (max-width: 480px) {
          .pokemon img {
            width: 80px;
            height: 80px;
          }

          .dialog {
            width: 150px;
            font-size: 10px;
          }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <script src="https://sfxr.me/riffwave.js"></script>
    <script src="https://sfxr.me/sfxr.js"></script>
</head>
<body>
<div id="battlefield"></div>
<canvas id="particles"></canvas>

<div id="pokemonDetailModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:100;">
  <div style="background:white; margin:10% auto; padding:20px; border-radius:8px; width:80%; max-width:500px; color:black; position:relative;">
    <button id="closeModal" style="position:absolute; top:10px; right:10px; background:none; border:none; font-size:20px; cursor:pointer;">&times;</button>
    <h2 id="modalPokemonName" style="text-align:center;"></h2>
    <div style="text-align:center; margin-bottom:15px;">
      <img id="modalPokemonImage" src="" alt="Pokemon" style="width:150px; height:150px; object-fit:contain; image-rendering:pixelated;">
    </div>
    <p><strong>Types:</strong> <span id="modalPokemonTypes"></span></p>
    <p><strong>Abilities:</strong> <span id="modalPokemonAbilities"></span></p>
    <p><a id="modalProjectLink" href="#" target="_blank" style="color:#007bff; text-decoration:none;">View Project</a></p>
  </div>
</div>

<script>

    const battlefield = document.getElementById('battlefield');
    const canvas = document.getElementById('particles');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    window.addEventListener('resize',()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight});

    // ===== Sound Effects =====


    const dialogSound = sfxr.toAudio(sfxr.generate("blipSelect"));

    // ===== Background Music =====
    const backgroundAudio = new Audio('https://raw.githubusercontent.com/Mshashikanth1/Mshashikanth1.github.io/main/backgroudAudio.mp3');
    backgroundAudio.loop = true;
    backgroundAudio.volume = 0.2; // Set a lower volume for background music
    
    let audioPlayed = false;
    document.addEventListener('click', () => {
        if (!audioPlayed) {
            backgroundAudio.play().then(() => {
                audioPlayed = true;
            }).catch(e => {
                console.error("Could not play background music on first interaction:", e);
            });
        }
    }, { once: true }); // Use { once: true } to ensure it only runs once

    backgroundAudio.addEventListener('error', (e) => {
        console.error("Error with audio element:", e);
        // Optionally, alert the user or display a message
    });

    const pokemonDetailModal = document.getElementById('pokemonDetailModal');
    const closeModalButton = document.getElementById('closeModal');
    const modalPokemonName = document.getElementById('modalPokemonName');
    const modalPokemonImage = document.getElementById('modalPokemonImage');
    const modalPokemonTypes = document.getElementById('modalPokemonTypes');
    const modalPokemonAbilities = document.getElementById('modalPokemonAbilities');
    const modalProjectLink = document.getElementById('modalProjectLink');

    closeModalButton.addEventListener('click', () => {
      pokemonDetailModal.style.display = 'none';
    });

    pokemonDetailModal.addEventListener('click', (event) => {
      if (event.target === pokemonDetailModal) {
        pokemonDetailModal.style.display = 'none';
      }
    });

    function showPokemonDetails(pokemonDiv) {
      const resumeType = pokemonDiv.dataset.resumetype;
      const resumeTitle = pokemonDiv.dataset.resumetitle;
      const resumeDetails = pokemonDiv.dataset.resumedetails;
      const resumeLink = pokemonDiv.dataset.resumelink;
      const resumeTechnologies = pokemonDiv.dataset.resumetechnologies;
      const resumeCategory = pokemonDiv.dataset.resumecategory;
      const resumeCompany = pokemonDiv.dataset.resumecompany;
      const resumeRole = pokemonDiv.dataset.resumerole;
      const resumeDuration = pokemonDiv.dataset.resumeduration;

      modalPokemonName.textContent = resumeTitle;
      modalPokemonImage.src = pokemonDiv.dataset.sprite1; // Keep PokÃ©mon image

      // Clear previous content
      modalPokemonTypes.innerHTML = '';
      modalPokemonAbilities.innerHTML = '';
      modalProjectLink.style.display = 'none';
      modalProjectLink.href = '#';

      if (resumeType === 'project') {
        modalPokemonTypes.innerHTML = `<strong>Technologies:</strong> ${resumeTechnologies}`;
        modalPokemonAbilities.innerHTML = `<strong>Achievements:</strong><p>${resumeDetails}</p>`; // Display as paragraph
        if (resumeLink) {
          modalProjectLink.href = resumeLink;
          modalProjectLink.textContent = 'View Project';
          modalProjectLink.style.display = 'block';
        }
      } else if (resumeType === 'skill') {
        modalPokemonTypes.innerHTML = `<strong>Category:</strong> ${resumeCategory}`;
        modalPokemonAbilities.innerHTML = `<strong>Skill:</strong> ${resumeDetails}`;
      } else if (resumeType === 'experience') {
        modalPokemonTypes.innerHTML = `<strong>Company:</strong> ${resumeCompany} | <strong>Role:</strong> ${resumeRole}`;
        modalPokemonAbilities.innerHTML = `<strong>Details:</strong> ${resumeDetails}`;
        // Optionally add duration here if needed
      } else if (resumeType === 'education') {
        modalPokemonTypes.innerHTML = `<strong>Degree:</strong> ${resumeTitle}`;
        modalPokemonAbilities.innerHTML = `<strong>Details:</strong> ${resumeDetails}`;
      } else if (resumeType === 'contact') {
        modalPokemonTypes.innerHTML = `<strong>Type:</strong> ${resumeTitle}`;
        modalPokemonAbilities.innerHTML = `<strong>Details:</strong> ${resumeDetails}`;
        if (resumeLink) {
          modalProjectLink.href = resumeLink;
          modalProjectLink.textContent = `View ${resumeTitle}`;
          modalProjectLink.style.display = 'block';
        }
      } else if (resumeType === 'certification') {
        modalPokemonTypes.innerHTML = `<strong>Type:</strong> ${resumeTitle}`;
        modalPokemonAbilities.innerHTML = `<strong>Details:</strong> ${resumeDetails}`;
        if (resumeLink) {
          modalProjectLink.href = resumeLink;
          modalProjectLink.textContent = `View ${resumeTitle}`;
          modalProjectLink.style.display = 'block';
        }
      }

      pokemonDetailModal.style.display = 'block';
    }

    function handlePokemonClick(pokemonDiv) {
      const cryUrl = pokemonDiv.dataset.cry;
      if (cryUrl) {
        const audio = new Audio(cryUrl);
        audio.volume = 0.5; // Adjust volume as needed
        audio.play().catch(e => console.error("Error playing PokÃ©mon cry:", e));
      }
      showPokemonDetails(pokemonDiv);
    }

    // ===== Resume lines with anime-style emotion =====
    const resumeData = [
      // Contact Information
      { type: "contact", title: "Email", details: "shashikanthvarma98@gmail.com" },
      { type: "contact", title: "Phone", details: "+91 6305696351" },
      { type: "contact", title: "Location", details: "Miryalaguda, Hyderabad" },
      { type: "contact", title: "LinkedIn", details: "LinkedIn Profile", link: "https://www.linkedin.com/in/shashikanthvarma" }, // Placeholder link
      { type: "contact", title: "LeetCode", details: "LeetCode Profile", link: "https://leetcode.com/Mshashikanth1/" }, // Placeholder link
      { type: "contact", title: "GitHub", details: "GitHub Profile", link: "https://github.com/Mshashikanth1" }, // Placeholder link

      // Education
      { type: "education", title: "B.tech CSE", details: "Institute of Aeronautical Engineering Hyderabad, July 2018 - July 2022, CGPA: 8.2" },

      // Experience - Aditya Birla pivot
      { type: "experience", company: "Aditya Birla pivot", role: "Software Development Engineer 2", duration: "August 2024 - Present", details: "Designed and developed 10+ scalable backend services for platform features including order processing, credit management, and checkout workflows, improving system throughput by 30%." },
      { type: "experience", company: "Aditya Birla pivot", role: "Software Development Engineer 2", duration: "August 2024 - Present", details: "Built and maintained 3 major chatbot integrations, reducing support tickets by 25% and enabling self-serve operations for thousands of users." },
      { type: "experience", company: "Aditya Birla pivot", role: "Software Development Engineer 2", duration: "August 2024 - Present", details: "Developed 5+ internal data dashboards for business stakeholders to monitor financial and operational KPIs, reducing manual reporting time by 40%." },
      { type: "experience", company: "Aditya Birla pivot", role: "Software Development Engineer 2", duration: "August 2024 - Present", details: "Engineered automated solutions for migrating 100,000+ rows of financial data (orders, credit limits, overdue interest) from Excel sheets to structured databases, cutting manual effort by 90%." },
      { type: "experience", company: "Aditya Birla pivot", role: "Software Development Engineer 2", duration: "August 2024 - Present", details: "Worked on invoice generation, validation, and order checkout modules, achieving 99.9% uptime and reducing processing latency by 15%." },
      { type: "experience", company: "Aditya Birla pivot", role: "Software Development Engineer 2", duration: "August 2024 - Present", details: "Contributed to the architecture and implementation of credit enabler systems supporting 10,000+ customer eligibility checks per month." },
      { type: "experience", company: "Aditya Birla pivot", role: "Software Development Engineer 2", duration: "August 2024 - Present", details: "Collaborated with 6+ cross-functional teams (product, design, QA, and business) to deliver features on time with a 98% release success rate." },
      { type: "experience", company: "Aditya Birla pivot", role: "Software Development Engineer 2", duration: "August 2024 - Present", details: "Followed engineering best practices in code quality, testing, and CI/CD, increasing deployment frequency by 3 and reducing rollback incidents to near zero." },

      // Experience - Jsw one platforms
      { type: "experience", company: "Jsw one platforms", role: "Software Development Engineer 1", duration: "August 2022 - August 2024", details: "Enhanced refund and cashback logic within the Order Management System, increasing financial transaction accuracy by 30% and improving reliability for 10,000+ monthly orders." },
      { type: "experience", company: "Jsw one platforms", role: "Software Development Engineer 1", duration: "August 2022 - August 2024", details: "Implemented key order lifecycle features including cancellation, confirmation, and revocation of planned shipments, reducing order processing errors by 25%." },
      { type: "experience", company: "Jsw one platforms", role: "Software Development Engineer 1", duration: "August 2022 - August 2024", details: "Optimized shipment-to-payment reconciliation logic in the Payment Service, improving ledger accuracy across buyer and seller accounts by 40% within the Batua microservice." },
      { type: "experience", company: "Jsw one platforms", role: "Software Development Engineer 1", duration: "August 2022 - August 2024", details: "Contributed to the design and development of a centralized Notification Service that now handles 50,000+ event-driven messages per day, improving system-wide communication reliability." },
      { type: "experience", company: "Jsw one platforms", role: "Software Development Engineer 1", duration: "August 2022 - August 2024", details: "Implemented robust APIs in the Payment Microservice to enable seamless interaction between payment and order objects using the CommerceTools platform, reducing integration latency by 20%." },
      { type: "experience", company: "Jsw one platforms", role: "Software Development Engineer 1", duration: "August 2022 - August 2024", details: "Supported the development of Credit Management and Plant Supply workflows, enhancing business operations and finance integration, resulting in 15% faster credit validation and improved supply coordination." },

      // Experience - Tvarana
      { type: "experience", company: "Tvarana", role: "Netsuite Developer 1", duration: "Jan 2022 - August 2022", details: "Actively contributed to 8+ customization projects in NetSuite, tailoring workflows and modules to meet specific business requirements across finance and operations teams." },
      { type: "experience", company: "Tvarana", role: "Netsuite Developer 1", duration: "Jan 2022 - August 2022", details: "Developed 15+ custom SuiteScripts enabling bulk insert, update, and deletion of NetSuite records and file objects, reducing manual effort by 70%." },
      { type: "experience", company: "Tvarana", role: "Netsuite Developer 1", duration: "Jan 2022 - August 2022", details: "Built 3+ business dashboards and audit analysis tools that improved financial visibility and helped identify 10-15% cost-cutting opportunities." },
      { type: "experience", company: "Tvarana", role: "Netsuite Developer 1", duration: "Jan 2022 - August 2022", details: "Supported optimization of business processes through automation and data-driven enhancements within the NetSuite ecosystem, reducing operational turnaround time by 25%." },

      // Skills - Programming Languages
      { type: "skill", category: "Programming Languages", title: "PostgreSQL", details: "PostgreSQL" },
      { type: "skill", category: "Programming Languages", title: "Bash", details: "Bash" },
      { type: "skill", category: "Programming Languages", title: "Python", details: "Python" },
      { type: "skill", category: "Programming Languages", title: "Java", details: "Java" },
      { type: "skill", category: "Programming Languages", title: "JavaScript", details: "JavaScript" },

      // Skills - Libraries/Frameworks
      { type: "skill", category: "Libraries/Frameworks", title: "Spring Boot", details: "Spring Boot" },
      { type: "skill", category: "Libraries/Frameworks", title: "Spring WebFlux", details: "Spring WebFlux" },
      { type: "skill", category: "Libraries/Frameworks", title: "Django", details: "Django" },
      { type: "skill", category: "Libraries/Frameworks", title: "Spring Security", details: "Spring Security" },

      // Skills - Tools / Platforms
      { type: "skill", category: "Tools / Platforms", title: "Google Cloud Platforms", details: "Google Cloud Platforms" },
      { type: "skill", category: "Tools / Platforms", title: "Amazon Web Services", details: "Amazon Web Services" },
      { type: "skill", category: "Tools / Platforms", title: "Redis", details: "Redis" },
      { type: "skill", category: "Tools / Platforms", title: "Kafka", details: "Kafka" },
      { type: "skill", category: "Tools / Platforms", title: "Open Search", details: "Open Search" },
      { type: "skill", category: "Tools / Platforms", title: "NetSuite", details: "NetSuite" },
      { type: "skill", category: "Tools / Platforms", title: "SuiteScript", details: "SuiteScript" },
      { type: "skill", category: "Tools / Platforms", title: "Figma", details: "Figma" },
      { type: "skill", category: "Tools / Platforms", title: "Postman", details: "Postman" },
      { type: "skill", category: "Tools / Platforms", title: "Jira", details: "Jira" },
      { type: "skill", category: "Tools / Platforms", title: "Confluence", details: "Confluence" },
      { type: "skill", category: "Tools / Platforms", title: "Grafana", details: "Grafana" },
      { type: "skill", category: "Tools / Platforms", title: "Kibana", details: "Kibana" },
      { type: "skill", category: "Tools / Platforms", title: "AWS (EC2, S3, Docker, Kubernetes, Jenkins, CI/CD Pipelines)", details: "AWS (EC2, S3, Docker, Kubernetes, Jenkins, CI/CD Pipelines)" },

      // Skills - Databases
      { type: "skill", category: "Databases", title: "Postgres", details: "Postgres" },
      { type: "skill", category: "Databases", title: "MySQL", details: "MySQL" },

      // Projects / Open-Source - Retrieval Augmented Generation
      {
        type: "project",
        title: "Retrieval Augmented Generation",
        technologies: "Python, LLMs, Docker, Pandas, Vector DBs",
        details: "Addressed the challenge of fine-tuning large language models (LLMs) on real-time data by implementing a RAG (Retrieval-Augmented Generation) pipeline, improving response accuracy by 35% without model retraining.",
        link: "https://github.com/Mshashikanth1/RAG-LLM" // Placeholder, replace with actual link
      },
      {
        type: "project",
        title: "Retrieval Augmented Generation",
        technologies: "Python, LLMs, Docker, Pandas, Vector DBs",
        details: "Utilized an open-source LLM to process 100,000+ domain-specific data points, eliminating the need for heavy GPU resources and reducing fine-tuning costs by 80%."
      },
      {
        type: "project",
        title: "Retrieval Augmented Generation",
        technologies: "Python, LLMs, Docker, Pandas, Vector DBs",
        details: "Designed a scalable indexing and retrieval system capable of fetching relevant context in <200 ms, enabling highly accurate and context-aware responses for production-like workloads."
      },
      {
        type: "project",
        title: "Retrieval Augmented Generation",
        technologies: "Python, LLMs, Docker, Pandas, Vector DBs",
        details: "Enabled cost-efficient and scalable LLM usage through lightweight retrieval strategies, supporting 10,000+ queries per day with minimal infrastructure overhead."
      },

      // Projects / Open-Source - Social Media Backend
      {
        type: "project",
        title: "Social Media Backend",
        technologies: "Spring Boot, Java 17, Neo4j, Open Search, Redis, PostgreSQL",
        details: "Built a full-featured social media application using Spring Boot, implementing 20+ core features inspired by platforms like Twitter and Instagram (posts, comments, likes, followers, timelines).",
        link: "https://github.com/Mshashikanth1/Social-Media-Backend" // Placeholder, replace with actual link
      },
      {
        type: "project",
        title: "Social Media Backend",
        technologies: "Spring Boot, Java 17, Neo4j, Open Search, Redis, PostgreSQL",
        details: "Leveraged Neo4j (graph database) to model and query 100,000+ user-relationship interactions, enabling efficient traversal of followers, likes, and engagement graphs."
      },
      {
        type: "project",
        title: "Social Media Backend",
        technologies: "Spring Boot, Java 17, Neo4j, Open Search, Redis, PostgreSQL",
        details: "Implemented features such as personalized timelines, content recommendations, and relationship graphs using optimized Cypher queries, improving recommendation accuracy by 30%."
      },
      {
        type: "project",
        title: "Social Media Backend",
        technologies: "Spring Boot, Java 17, Neo4j, Open Search, Redis, PostgreSQL",
        details: "Utilized Redis to cache frequently accessed data (user profiles, timelines, follower lists), reducing response times by 40% and cutting database load by 60%."
      },
      {
        type: "project",
        title: "Social Media Backend",
        technologies: "Spring Boot, Java 17, Neo4j, Open Search, Redis, PostgreSQL",
        details: "Gained hands-on experience with modern backend architecture, caching strategies, and graph-based data modeling while building a system capable of handling 10,000+ simulated requests per day."
      },

      // Certifications
      { type: "certification", title: "Certifications", details: "All Achievements Repo - various math, science, coding contests", link: "https://github.com/Mshashikanth1/Achievements" } // Placeholder link
    ];

    const pokemonCount = resumeData.length; // Update pokemonCount to match the number of resume items

    // Map resumeData details to resume lines for hover dialogs
    const resumeLines = [];
    resumeData.forEach(item => {
      const emotions = ["ğŸ˜Š","ğŸ”¥","ğŸ’¥","ğŸŒŸ","ğŸ’«","ğŸ’¦","ğŸŒ¸","âœ¨","ğŸ˜†","ğŸ¦„"];
      const emotion = emotions[Math.floor(Math.random()*emotions.length)];
      let line = "";

      if (item.type === "contact") {
        line = `Shashi's ${item.title} is ${item.details}. Reach out! ${emotion}`;
      } else if (item.type === "education") {
        line = `Shashi earned a ${item.title} from ${item.details.split(',')[0]} with a CGPA of ${item.details.split('CGPA: ')[1]}. ${emotion}`;
      } else if (item.type === "experience") {
        line = `At ${item.company}, Shashi worked as a ${item.role} from ${item.duration}. He ${item.details.toLowerCase()}. ${emotion}`;
      } else if (item.type === "skill") {
        line = `Shashi is proficient in ${item.title} within ${item.category}. He uses it for ${item.details.toLowerCase()}. ${emotion}`;
      } else if (item.type === "project") {
        line = `Shashi's project, "${item.title}", involved ${item.technologies}. A key achievement: ${item.details}. ${emotion}`;
      } else if (item.type === "certification") {
        line = `Shashi holds a certification in ${item.title}. Details: ${item.details}. ${emotion}`;
      }
      resumeLines.push(line);
    });

    // Add more generic, engaging lines to reach a higher quantity (e.g., 100)
    const genericAchievements = [
      "Shashi forges backend services that scale to infinity and beyond ğŸš€.",
      "With Shashi at the helm, support tickets vanish like ghosts in the machine ğŸ‘».",
      "Shashi crafts dashboards so insightful, they reveal the future of data ğŸ”®.",
      "He automates pipelines with such grace, they flow like digital rivers ğŸŒŠ.",
      "Shashi's code boasts 99.9% uptime, a fortress of digital reliability ğŸ°.",
      "Refund and cashback logic bends to Shashiâ€™s will, 30% more efficient than before ğŸ’°.",
      "In the face of a data migration, Shashi's focus is a laser beam in the darkness ğŸ’¡.",
      "He whispers commands to chatbots, and they spring to life, ready for battle ğŸ¤–.",
      "For Shashi, a complex dashboard is a treasure map to untold business insights ğŸ—ºï¸.",
      "The CI/CD pipeline roars, a testament to Shashi's command over the digital domain ğŸ¦.",
      "Bugs dare not linger where Shashi's code resides, for he is the guardian of the system ğŸ›¡ï¸.",
      "Shashi orchestrates notifications with the precision of a master composer ğŸ¼.",
      "He tames the monstrous order processing system, making it a loyal beast of burden ğŸ².",
      "Late nights are but a training montage for Shashi, honing his skills to perfection âš”ï¸.",
      "Behind every seamless transaction is Shashi's epic struggle against chaos ğŸ’¥.",
      "Shashi leaps between data tables like a digital acrobat, a guardian of information ğŸ¤¸.",
      "He banishes bugs to the shadow realm, leaving systems pure and bright âœ¨.",
      "Shashi's recommendation engines are so accurate, they feel like mind-reading ğŸ§ .",
      "He migrates data by the hundred-thousands, a symphony of precision and order ğŸ¶.",
      "Cross-functional teams unite under Shashi's banner, achieving legendary release success ğŸ†.",
      "With CI/CD best practices, Shashi has tripled the speed of deployment, a true feat of engineering âš¡.",
      "The order lifecycle, once fraught with peril, is now a smooth journey thanks to Shashi â›µ.",
      "Shashi brings balance to the ledger, improving reconciliation accuracy by 40% âš–ï¸.",
      "His notification service handles 50,000 messages a day without breaking a sweat ğŸ’ª.",
      "Payment APIs under Shashi's watch are 20% faster, a blur of digital efficiency ğŸ’¨.",
      "Shashi's custom SuiteScripts have automated 70% of manual tasks, a magical feat of coding ğŸ§™.",
      "His dashboards are a beacon of clarity, revealing cost-cutting opportunities in the fog of finance ğŸŒ«ï¸.",
      "Business processes are 25% faster under Shashi's optimization, a true speed demon ğŸï¸.",
      "Shashi's grasp of modern architecture and caching is the stuff of legends ğŸ›ï¸.",
      "He models user interactions in Neo4j, revealing the secret heart of the system â¤ï¸.",
      "Recommendation accuracy is up by 30%, a testament to Shashi's data wizardry ğŸ§™â€â™‚ï¸.",
      "With caching, response times are down by 40%, a lightning-fast experience for all âš¡.",
      "Shashiâ€™s eyes gleamed with unyielding fire ğŸ”¥ğŸ‘€ as he stepped into the realm of software",
 "ready to turn lines of code into miracles ğŸ’»âœ¨.",
"Fingers flew over the keyboard âŒ¨ï¸âš¡ as if he were dueling invisible enemies in a storm of code ğŸŒªï¸",
 "each line a strike sharper than a katana âš”ï¸.",
"The screen reflected his determination ğŸ’¡",
 "every function call a pulse of life in the digital battlefield ğŸ›¡ï¸.",
"Built scalable backend services", "improving throughput by 30% ğŸ“ˆâš¡",
 "systems bending to his will as if enchanted.",
"Implemented chatbots ğŸ¤–ğŸ’¬ reducing support tickets by 25%",
 "loyal companions blinking at his command âœ¨.","Developed dashboards ğŸ“ŠğŸ–Œï¸",
 "cutting manual reporting time by 40%",
 "each update a treasure revealed in the labyrinth of numbers ğŸ—ï¸ğŸŒŒ.",
"Automated migration pipelines âš¡ğŸ› ï¸", "reducing effort by 90%",
 "guiding hundreds of thousands of rows like rivers of light ğŸŒŠâœ¨.",
"Optimized invoice generation ğŸ’³ğŸ”¥", "achieving 99.9% uptime",
 "servers humming in harmony with his mastery ğŸ¶.",
"Enhanced refund and cashback logic ğŸ’°âš¡ by 30%",
 "each calculation a duel against chaos âš”ï¸.","Shashi gritted his teeth ğŸ˜¤",
 "heart racing â¤ï¸â€ğŸ”¥ as the database migration unfolded like a perilous cliffside battle ğŸ”ï¸.",
"With a deep breath ğŸŒ¬ï¸", "he whispered to himself",
 "â€œI will tame this chaosâ€¦ no matter what.â€ ğŸ—¡ï¸âœ¨",
"Chatbots sprang to life under his hands ğŸ¤–ğŸŒŸ",
 "blinking like small companions ready to fight by his side âš”ï¸.",
"Every dashboard update felt like opening a treasure chest ğŸ†ğŸŒŒ hidden deep within the streams of data ğŸ“Š.",
"The CI/CD pipeline roared to life ğŸš€ğŸ”¥",
 "and Shashiâ€™s grin lit up the room ğŸ˜âœ¨",
 "triumphant like a hero after the storm ğŸŒ©ï¸ğŸ†.",
"Even when bugs struck like sneaky assassins in the shadows ğŸ›ğŸ—¡ï¸",
 "he countered with unshakable resolve ğŸ’ª.",
"Notifications danced across the screen ğŸŒ¸ğŸ’« like falling sakura petals",
 "orchestrated with poetic precision ğŸ¶.",
"Each successful deployment sent a shiver of victory down his spine ğŸ…âš¡",
 "the thrill of battle surging in every vein â¤ï¸â€ğŸ”¥.",
"The order processing system pulsed with life under his hands ğŸ¤–âš¡",
 "a giant mech responding to his every command ğŸ¯âœ¨.",
"Late nights blurred into a montage ğŸŒ™ğŸ’» of glowing screens and racing hearts ğŸ’–",
 "the soundtrack of his relentless passion ğŸ¶ğŸ”¥.",
"He imagined the users smiling ğŸ˜Šâœ¨",
 "unaware of the epic struggle behind every seamless transaction ğŸ’»ğŸ›¡ï¸.",
"Data flowed like rivers of light ğŸŒŠâœ¨",
 "and Shashi leapt from table to table ğŸ¦¸â€â™‚ï¸",
 "a lone guardian in a digital battlefield ğŸ›¡ï¸.",
"Each solved bug felt like a demon banished ğŸ‘¹âš”ï¸",
 "leaving the world a little brighter under his watch ğŸŒŸ.",
"Social media backend improved recommendation accuracy by 30% ğŸ“ŠğŸ”¥",
 "interactions pulsing with life under his vigilant care ğŸ‘€ğŸ’».",
"Engineered automated solutions migrating 100","000+ rows of data ğŸ“¦âš¡",
 "orchestrated like a symphony of order ğŸ¼âœ¨.",
"Contributed to architecture of credit enabler systems ğŸ¦ğŸ›¡ï¸ for 10",
"000+ customers", "each check a duel fought and won âš”ï¸ğŸ’ª.",
"Collaborated with 6+ cross-functional teams ğŸ¤ğŸŒŸ",
 "achieving 98% release success",
 "teamwork like a perfectly choreographed anime battle ğŸ¬âš¡.",
"Followed CI/CD best practices ğŸ—ï¸ğŸš€", "increasing deployment frequency 3x âš¡",
 "rollbacks vanished like defeated foes ğŸ’¨.",
"Implemented key order lifecycle features ğŸ”„ğŸ’³", "reducing errors by 25%",
 "confirmations and cancellations dancing to his command ğŸ’ƒâœ¨.",
"Optimized shipment-to-payment reconciliation ğŸ“¦ğŸ’°",
 "improving ledger accuracy by 40%", "numbers harmonizing under his gaze ğŸ¶ğŸ’».",
"Centralized Notification Service handling 50","000+ messages/day ğŸ””âš¡",
 "orchestrated like falling stars ğŸŒ  under his guidance.",
"Implemented robust Payment Microservice APIs ğŸ’³ğŸ”—", "reducing latency by 20%",
 "interactions flowing like magic ğŸŒŒâœ¨.","Developed custom SuiteScripts ğŸ“âš¡",
 "reducing manual effort by 70%", "executed like magical scrolls ğŸ“œâœ¨.",
"Built dashboards ğŸ“ŠğŸ–Œï¸",
 "improving financial visibility and identifying hidden opportunities ğŸ’ğŸ”.",
"Optimized business processes â±ï¸ğŸ’»", "reducing turnaround time by 25%",
 "efficiency flowing like rivers of light ğŸŒŠâœ¨.",
"Gained hands-on experience with modern backend architecture ğŸŒğŸ’» and caching strategies ğŸ§Šâš¡",
 "systems humming under his command ğŸ¶.","Leveraged Neo4j to model and query 100",
"000+ user interactions ğŸ”—ğŸ’¡", "graphs pulsing like veins of life â¤ï¸.",
"Implemented features improving recommendation accuracy by 30% ğŸŒŸğŸ“Š",
 "timelines flowing like rivers of joy ğŸŒŠğŸ˜Š.",
"Cached frequently accessed data âš¡ğŸ’»", "reducing response times by 40%",
 "speed shimmering like magic crystals ğŸ’âœ¨.",
 "Shashiâ€™s mind blazes like a supernova ğŸŒŸğŸ”¥",
 "illuminating solutions where others see only darkness ğŸŒŒ.",
"Every system he touches transforms under his hands âœ¨ğŸ–¥ï¸",
 "humming with perfection ğŸµ.","His determination is unstoppable ğŸ’ªâš¡",
 "like a hero racing through stormy skies ğŸŒ©ï¸ğŸƒâ€â™‚ï¸.",
"Shashi writes code with the precision of a master swordsman âš”ï¸ğŸ‘¨â€ğŸ’» in a duel.",
"Even the most tangled databases bow to his insight ğŸ¯ğŸ“Š.",
"His problem-solving sparks like lightning âš¡ğŸ§ ", "striking true every time ğŸ¯.",
"Shashi turns challenges into victories ğŸ†ğŸ”¥ as effortlessly as breathing ğŸŒ¬ï¸.",
"His intellect shines brighter than a thousand city lights ğŸŒƒğŸ’¡.",
"Every deployment he touches is a flawless performance ğŸ¬ğŸ’»",
 "admired by all ğŸ‘.",
"Shashiâ€™s creativity turns mundane scripts into epic masterpieces ğŸ¨ğŸ–‹ï¸.",
"Bugs flee at the sight of his determined gaze ğŸ‘€ğŸ’¥.",
"His technical vision is so sharp it feels almost prophetic ğŸ”®âœ¨.",
"Every API he builds flows like a river of light ğŸŒŠğŸ’«",
 "elegant and unstoppable ğŸŒŸ.",
"Shashiâ€™s leadership inspires teams ğŸ¹ğŸ¤ to rise like heroes in a saga ğŸŒ„.",
"His dedication is a blazing torch ğŸ”¥ğŸ•¯ï¸",
 "guiding projects through darkness ğŸŒŒ.",
"Every challenge becomes a stepping stone under his fearless resolve ğŸª¨ğŸ¦¸â€â™‚ï¸.",
"Shashi commands cloud platforms â˜ï¸âš¡ like a wizard commanding elemental forces ğŸ§™â€â™‚ï¸.",
"He transforms late nights ğŸŒ™ğŸ’» into triumphs ğŸ…",
 "coding with unwavering passion â¤ï¸â€ğŸ”¥.","Every script he writes feels alive âœ¨ğŸ’»",
 "pulsing with perfection ğŸ’–.",
"Shashi sees possibilities ğŸŒˆğŸ‘ï¸ where others see dead ends ğŸš«.",
"His skill with microservices ğŸ¤–âš™ï¸ is legendary",
 "orchestrating harmony from chaos ğŸ¶.","Shashiâ€™s focus is absolute ğŸ¯ğŸ§˜â€â™‚ï¸",
 "like a lone warrior sharpening his blade âš”ï¸.",
"Every line of code he writes carries weight", "beauty", "and precision ğŸ’ğŸ–‹ï¸.",
"He navigates complex systems like a hero through a labyrinth ğŸ°ğŸ—ï¸",
 "always victorious ğŸ†.","Shashiâ€™s logic is flawless ğŸ§©âœ”ï¸",
 "slicing through complexity with ease âœ¨.",
"Every integration he completes feels like a victory parade ğŸ‰ğŸ’» across digital skies ğŸŒŒ.",
"His presence inspires confidence in teammates ğŸ¤ğŸŒŸ",
 "like a seasoned captain at the helm ğŸš¢.",
"Shashiâ€™s innovations illuminate paths ğŸŒŸğŸ›¤ï¸ where none existed ğŸŒŒ.",
"Even the fiercest bugs tremble ğŸ›ğŸ˜± under his relentless resolve ğŸ’ª.",
"His debugging skills are legendary âš”ï¸ğŸ",
 "striking true with perfect timing â±ï¸.",
"Shashi transforms repetitive tasks ğŸ”„ğŸ’» into streamlined magic âœ¨ğŸ§™â€â™‚ï¸.",
"Every challenge he faces is met with courage ğŸ’–ğŸ¦¸â€â™‚ï¸ and unmatched skill ğŸ¯.",
"His architectural designs are masterpieces ğŸ¯ğŸ–Œï¸",
 "elegant as a cathedral of code â›ªğŸ’».",
"Shashiâ€™s mind races faster than any system ğŸƒâ€â™‚ï¸ğŸ’¨",
 "predicting and preventing errors effortlessly ğŸ”®.",
"Each project milestone shines brighter ğŸŒŸğŸ¯ under his guidance ğŸ¦¸â€â™‚ï¸.",
"Shashiâ€™s teamwork is like a perfectly choreographed anime battle scene ğŸ¬âš”ï¸â€”flawless in execution ğŸ‘.",
"He carries the weight of complex systems âš–ï¸ğŸ’» with the strength of a hero ğŸ¦¸â€â™‚ï¸.",
"His solutions are as elegant as a falling sakura petal ğŸŒ¸ğŸƒ",
 "yet as powerful as a tidal wave ğŸŒŠğŸ’¥.",
"Shashiâ€™s coding flows like a river of light ğŸŒŠâœ¨",
 "unstoppable and breathtaking ğŸŒŸ.",
"Every deployment he touches is smoother than silk ğŸ§µğŸ’»",
 "flawless in every detail ğŸŒˆ.","He reads logs like a seasoned strategist ğŸ“œğŸ§ ",
 "anticipating challenges before they appear ğŸ”®.",
"Shashiâ€™s presence in a project feels like a blessing ğŸŒ¸ğŸ™",
 "guiding all toward success ğŸ†.",
"His technical intuition is so sharp it borders on supernatural ğŸ‘ï¸â€ğŸ—¨ï¸âœ¨.",
"Even in chaos ğŸŒªï¸", "he moves with calm precision ğŸ§˜â€â™‚ï¸",
 "a hero among engineers ğŸ¦¸â€â™‚ï¸.",
"Shashiâ€™s leadership turns ordinary teams ğŸŒ±ğŸ¤ into legends ğŸŒŸğŸ†.",
"Every database he touches becomes a palace of order ğŸ¯ğŸ“Š and clarity âœ¨.",
"His problem-solving is swift âš¡ğŸ—¡ï¸",
 "striking down inefficiency like a blade ğŸ—¡ï¸.",
"Shashiâ€™s innovation brings entire systems to life ğŸŒ±ğŸ’»",
 "pulsing with vitality â¤ï¸.","His focus pierces complexity ğŸ”ğŸ’¡",
 "uncovering solutions others miss ğŸŒŸ.",
"Every project he finishes leaves a trail of awe ğŸ˜²âœ¨ and admiration ğŸ‘.",
"Shashiâ€™s resilience is unmatched ğŸ›¡ï¸ğŸ’ª",
 "enduring challenges like a hero in an endless saga ğŸï¸.",
"His analytical mind slices through problems ğŸ§ âš”ï¸ with surgical precision ğŸ¥.",
"Each integration he performs flows like a symphony ğŸ¼ğŸ’» of perfection ğŸŒŸ.",
"Shashiâ€™s dedication shines brighter than any accolade ğŸ†âœ¨",
 "evident in every success ğŸŒˆ.","He anticipates issues before they appear ğŸ”®ğŸ‘€",
 "a visionary in code and design ğŸ–¥ï¸ğŸ§ .",
"Every system he touches hums with harmony ğŸ¶ğŸ’»",
 "a testament to his mastery ğŸ‘‘.",
"Shashiâ€™s creativity turns routine tasks ğŸ”„ğŸ¨ into epic feats âš”ï¸âœ¨.",
"His contributions feel larger than life ğŸŒŸğŸŒ",
 "like a legendary hero in the making ğŸ¦¸â€â™‚ï¸.",
"He inspires awe ğŸ˜²ğŸ”¥ with every achievement",
 "leaving teammates and users amazed ğŸ¤©.",
"Shashiâ€™s debugging feels like a heroic duel âš”ï¸ğŸ",
 "each victory satisfying and thrilling ğŸ†.",
"Every code review he performs sharpens the teamâ€™s abilities âœ¨ğŸ–‹ï¸.",
"His impact stretches far beyond his immediate work ğŸŒŒğŸ’»",
 "touching projects like a ripple of light ğŸŒŠâœ¨.",
"Shashi commands every tool and language ğŸ§°ğŸ–¥ï¸ with the finesse of a master ğŸ“.",
"Every solution he delivers carries elegance ğŸ’ğŸ–‹ï¸ and precision ğŸ¯",
 "admired by all ğŸ‘.","His technical brilliance flows effortlessly ğŸŒŠğŸ’¡",
 "bending complex systems to his will âœ¨.",
"Shashi moves through challenges like a hero ğŸ¦¸â€â™‚ï¸ğŸ”ï¸ navigating trials",
 "unyielding and unstoppable ğŸ’ª.",
"His problem-solving inspires teammates ğŸŒŸğŸ¤ to rise and shine with him ğŸŒ….",
"Every deployment he leads is a flawless spectacle ğŸ‡ğŸ’»",
 "celebrated silently by systems themselves ğŸ¤–âœ¨.",
"Shashiâ€™s innovations resonate like an epic soundtrack ğŸ¶ğŸŒŒ",
 "stirring pride and awe ğŸ˜².",
"His insights illuminate the dark corners of any project ğŸŒŒğŸ’¡",
 "revealing hidden possibilities ğŸŒˆ.",
"Every achievement is a brushstroke ğŸ–Œï¸ğŸŒŸ in the masterpiece of his career ğŸ†.",
"Shashiâ€™s efficiency is legendary âš¡ğŸ’»",
 "cutting through obstacles with unrivaled skill ğŸ—¡ï¸.",
"His calm under pressure turns crises ğŸŒªï¸ğŸ’» into opportunities for triumph ğŸ†âœ¨.",
"Every integration and API he builds becomes a monument ğŸ¯âœ¨ of elegance.",
"Shashiâ€™s intellect blazes through complex systems ğŸŒŸğŸ’» like a comet across the night sky ğŸŒŒ.",
"His attention to detail is as sharp as a finely honed blade âš”ï¸ğŸ’.",
"Every project milestone is brighter ğŸŒ„âœ¨ for his presence ğŸ¦¸â€â™‚ï¸.",
"Shashiâ€™s vision shapes systems into perfectly orchestrated symphonies ğŸ¼ğŸ’» of code.",
"He turns mundane tasks into adventures ğŸ¹âœ¨",
 "infusing each with brilliance and life ğŸ’–.",
"His mastery of multiple languages and frameworks is awe-inspiring ğŸŒŸğŸ“š",
 "like a polymath hero ğŸ¦¸â€â™‚ï¸.",
"Shashiâ€™s leadership feels like a guiding light ğŸŒŸğŸ•¯ï¸",
 "ensuring every team member reaches their potential ğŸš€.",
"Every challenge he overcomes is a new chapter ğŸ“–âš”ï¸ in his legendary saga ğŸŒŒ.",
"His solutions are precise ğŸ¯", "elegant âœ¨",
 "and almost poetic ğŸ–‹ï¸ in execution.",
"Shashi moves through deadlines ğŸƒâ€â™‚ï¸â³ like a hero sprinting across a battlefield âš”ï¸",
 "unstoppable.",
"His attention to system performance transforms ordinary applications ğŸ–¥ï¸ğŸ’¨ into works of art ğŸ¨.",
"Every optimization he performs leaves systems faster âš¡ğŸ’»", "smarter ğŸ§ ",
 "and more elegant âœ¨.","Shashiâ€™s work ethic radiates ğŸ”¥ğŸŒŸ like a heroâ€™s aura",
 "inspiring all who witness it ğŸ‘€.",
"He anticipates needs and prevents failures ğŸ”®ğŸ’¡ like a seer of the digital realm ğŸ§™â€â™‚ï¸.",
"Each time he debugs âš”ï¸ğŸ›",
 "itâ€™s as if heâ€™s cutting through chaos with a legendary sword ğŸ—¡ï¸âœ¨.",
"Shashiâ€™s mentorship elevates teammates ğŸ¦¸â€â™‚ï¸ğŸ¤",
 "turning ordinary developers into champions ğŸ†.",
"Every challenge he tackles is met with calm confidence ğŸ§˜â€â™‚ï¸ğŸŒŸ that inspires trust ğŸ¤.",
"His presence ensures projects succeed with near-mythical reliability ğŸ¯âœ¨.",
"Shashiâ€™s insights into systems feel like visions of the future ğŸ”®ğŸ’»",
 "ahead of their time â³.","Each database schema he designs is a fortress ğŸ°ğŸ“Š",
 "elegant and unbreakable âš¡.","His technical brilliance flows effortlessly ğŸŒŠğŸ’¡",
 "a river of skill and creativity ğŸ¨.",
"Every late-night coding session ğŸŒ™ğŸ’» is an epic montage ğŸ¬",
 "showcasing his relentless pursuit of excellence ğŸ”¥.",
"Shashiâ€™s debugging instincts strike faster âš¡ğŸ than any warning",
 "always precise ğŸ¯.","He orchestrates systems with grace ğŸ’«ğŸ¼",
 "turning complex interdependencies into harmonious flows ğŸŒŠâœ¨.",
"Every feature he delivers feels alive âœ¨ğŸ’»",
 "infused with his meticulous care ğŸ’–.",
"Shashi Kanth Varma is not just an engineer ğŸ–¥ï¸ğŸ¦¸â€â™‚ï¸â€”he is a legend ğŸŒŸğŸ”¥",
 "a hero of the digital age âš¡ğŸ†."
    ];

    while (resumeLines.length < 100) { // Ensure at least 100 lines for variety
      const emotions = ["ğŸ˜Š","ğŸ”¥","ğŸ’¥","ğŸŒŸ","ğŸ’«","ğŸ’¦","ğŸŒ¸","âœ¨","ğŸ˜†","ğŸ¦„"];
      const emotion = emotions[Math.floor(Math.random()*emotions.length)];
      let line = genericAchievements[Math.floor(Math.random() * genericAchievements.length)];
      resumeLines.push(`${line} ${emotion}`);
    }

    // ===== Particle system =====
    let particles=[];
    function spawnParticles(x,y,type){

      for(let i=0;i<10;i++){
        particles.push({
          x,y,
          vx:(Math.random()-0.5)*4,
          vy:(Math.random()-1.5)*4,
          life:Math.random()*50+30,
          color:type==='Electric'?'#ffff33':
                type==='Fire'?'#ff5500':
                type==='Water'?'#33ccff':
                type==='Grass'?'#33ff55':'#fff'
        });
      }
    }
    function updateParticles(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      particles.forEach((p,i)=>{
        ctx.globalAlpha=p.life/60;
        ctx.fillStyle=p.color;
        ctx.beginPath();
        ctx.arc(p.x,p.y,3,0,Math.PI*2);
        ctx.fill();
        p.x+=p.vx;
        p.y+=p.vy;
        p.vy+=0.05;
        p.life--;
        if(p.life<=0) particles.splice(i,1);
      });
      requestAnimationFrame(updateParticles);
    }
    updateParticles();

    // ===== API Handling with Timeout =====
    function fetchWithTimeout(url, options, timeout = 5000) {
      return Promise.race([
        fetch(url, options),
        new Promise((_, reject) =>
          setTimeout(() => reject(new Error('timeout')), timeout)
        )
      ]);
    }

    // ===== Lazy load PokÃ©mon =====
    async function fetchPokemonData(pokemonId, originalIndex){
      try{
        const res = await fetchWithTimeout(`https://pokeapi.co/api/v2/pokemon/${pokemonId}`);
        const data = await res.json();
        
        let sprite, sprite2, animatedSprite;
        const versions = data.sprites.versions;
        const availableVersions = [];
        const allowedGens = ['generation-iii', 'generation-iv', 'generation-v', 'generation-vi', 'generation-vii', 'generation-viii'];

        if (versions) {
            for (const gen of allowedGens) {
                if (versions[gen]) {
                    for (const game in versions[gen]) {
                        if (versions[gen][game].front_default) {
                            availableVersions.push(versions[gen][game]);
                        }
                    }
                }
            }
        }

        if (availableVersions.length > 0) {
            const randomVersion = availableVersions[Math.floor(Math.random() * availableVersions.length)];
            sprite = randomVersion.front_default;
            sprite2 = randomVersion.back_default || data.sprites.back_default; // Fallback for back sprite
        } else {
            // Fallback to default sprites if no preferred version sprites are available
            sprite = data.sprites.front_default;
            sprite2 = data.sprites.back_default;
        }

        // Ensure we have a sprite, even if all else fails
        if (!sprite) {
            sprite = data.sprites.front_default;
        }

        // Get animated sprite
        if (data.sprites.versions['generation-v']['black-white'] && data.sprites.versions['generation-v']['black-white'].animated) {
            animatedSprite = data.sprites.versions['generation-v']['black-white'].animated.front_default;
        }

        const types = data.types.map(t=>t.type.name);
        const name = data.name;
        const cry = data.cries?.latest || data.cries?.legacy; // Get the cry URL, prioritizing 'latest'

        // Assign resume item data using originalIndex
        const resumeItem = resumeData[originalIndex - 1];
        console.log("Fetched resume item:", resumeItem); // Debugging line
        
        return {sprite, sprite2, types, name, animatedSprite, cry, resumeItem};
      }catch(e){
        console.error(`Failed to fetch pokemon ${pokemonId}:`, e);
        return null;
      }
    }

    // ===== Create PokÃ©mon elements =====
    function createPokemon(originalIndex){
      const div = document.createElement('div');
      div.className='pokemon';
      // Assign a random PokÃ©mon ID for variety
      const randomPokemonId = Math.floor(Math.random() * pokemonCount) + 1;
      div.dataset.index = randomPokemonId;
      div.dataset.originalIndex = originalIndex; // Keep original index for resume item mapping

      const img=document.createElement('img');
      div.appendChild(img);

      const dialog=document.createElement('div');
      dialog.className='dialog';
      div.appendChild(dialog);

      div.addEventListener('mouseenter',()=>showDialog(div));
      div.addEventListener('mouseleave',()=>hideDialog(div));
      div.addEventListener('click', () => handlePokemonClick(div));

      battlefield.appendChild(div);
      return div;
    }

    const pokemonDivs=[];
    for(let i=1;i<=pokemonCount;i++){
      pokemonDivs.push(createPokemon(i));
    }

    const observer=new IntersectionObserver(async(entries)=>{
      for(const entry of entries){
        if(entry.isIntersecting){
          const div=entry.target;
          const img=div.querySelector('img');
          if(!img.src){
            const data=await fetchPokemonData(div.dataset.index, div.dataset.originalIndex);
            if(data && data.sprite){
              img.src=data.sprite;
              div.dataset.sprite1=data.sprite;
              if(data.sprite2){
                div.dataset.sprite2=data.sprite2;
              }
              if (data.animatedSprite) {
                div.dataset.animated = data.animatedSprite;
              }
              if (data.cry) {
                div.dataset.cry = data.cry;
              }
              div.dataset.types=data.types.join(','); // Keep original types for particle effects

              // Store resume item data in dataset
              if (data.resumeItem) {
                div.dataset.resumetype = data.resumeItem.type;
                div.dataset.resumetitle = data.resumeItem.title;
                div.dataset.resumedetails = data.resumeItem.details;
                div.dataset.resumelink = data.resumeItem.link || '';
                div.dataset.resumecategory = data.resumeItem.category || '';
                div.dataset.resumecompany = data.resumeItem.company || '';
                div.dataset.resumerole = data.resumeItem.role || '';
                div.dataset.resumeduration = data.resumeItem.duration || '';
                div.dataset.resumetechnologies = data.resumeItem.technologies || '';
              }
            }
          }
        }
      }
    },{root:null, rootMargin:'200px', threshold:0.1});
    pokemonDivs.forEach(div=>observer.observe(div));

    // ===== Dialog handling =====
    let lastLines=[];
    function getRandomResumeLine(){
      let line = resumeLines[Math.floor(Math.random()*resumeLines.length)];
      lastLines.push(line);
      if(lastLines.length>5) lastLines.shift();
      return line;
    }

    // ===== Jumping & speaking =====
    function speakRandomPokemon(){
      const available = pokemonDivs.filter(d=>d.querySelector('img').src);
      if(!available.length) return;

      const visiblePokemon = available.filter(poke => {
        const rect = poke.getBoundingClientRect();
        return rect.right > 0 && rect.left < window.innerWidth;
      });

      if (visiblePokemon.length === 0) {
        // No visible pokemon to make jump, so do nothing
        return;
      }

      // Pick only one visible pokemon
      const poke = visiblePokemon[Math.floor(Math.random() * visiblePokemon.length)];

      const dialog = poke.querySelector('.dialog');
      const line = getRandomResumeLine();
      dialog.textContent = line;
      dialog.style.opacity=1;

      // Random jump height
      const jumpHeight = Math.random()*80 + 40;
      poke.style.transform=`translateY(-${jumpHeight}px) scale(1.3)`;


      // Use animated sprite if available
      const img = poke.querySelector('img');
      if (poke.dataset.animated) {
        img.src = poke.dataset.animated;
      }

      const rect = poke.getBoundingClientRect();
      const type = poke.dataset.types?.split(',')[0] || 'Electric';
      spawnParticles(rect.left+40, rect.top+40,type);

      setTimeout(()=>{
        dialog.style.opacity=0;
        poke.style.transform='translateY(0) scale(1)';
        // Revert to static sprite
        if (poke.dataset.sprite1) {
            img.src = poke.dataset.sprite1;
        }
      },3000);
    }

    // Hover dialog
    function showDialog(poke){
      const dialog = poke.querySelector('.dialog');
      dialog.textContent=getRandomResumeLine();
      dialog.style.opacity=1;
      dialogSound.play();
      const jumpHeight = Math.random()*60 + 30;
      poke.style.transform=`translateY(-${jumpHeight}px) scale(1.2)`;

      
      // Use animated sprite if available
      const img = poke.querySelector('img');
      if (poke.dataset.animated) {
        img.src = poke.dataset.animated;
      }

      const rect = poke.getBoundingClientRect();
      const type = poke.dataset.types?.split(',')[0] || 'Electric';
      spawnParticles(rect.left+40, rect.top+40,type);
    }
    function hideDialog(poke){
      poke.querySelector('.dialog').style.opacity=0;
      poke.style.transform='translateY(0) scale(1)';
      
      // Revert to static sprite
      const img = poke.querySelector('img');
      if (poke.dataset.sprite1) {
        img.src = poke.dataset.sprite1;
      }
    }

    // ===== Loops & Scrolling =====
    setInterval(speakRandomPokemon,1200); // more frequent
    
    let scrollDirection = -1; // Start scrolling right to left
    let autoScrollEnabled = true;

    function autoScroll(){
      if (autoScrollEnabled) {
        battlefield.scrollLeft += scrollDirection * 2; // faster scroll
        if(battlefield.scrollLeft >= battlefield.scrollWidth - window.innerWidth -1) {
            scrollDirection = -1;
        } else if (battlefield.scrollLeft <= 0) {
            scrollDirection = 1;
        }
      }
      requestAnimationFrame(autoScroll);
    }
    autoScroll();

    battlefield.addEventListener('wheel', (e) => {
        e.preventDefault();
        battlefield.scrollLeft += e.deltaY;
        autoScrollEnabled = false; // Disable auto-scroll on user interaction
        setTimeout(() => autoScrollEnabled = true, 5000); // Re-enable after 5s of inactivity
    });
</script>
</body>
</html>
